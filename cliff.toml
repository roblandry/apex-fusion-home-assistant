# git-cliff configuration
# Generates CHANGELOG.md from Conventional Commits.

[changelog]
header = "# Changelog\n\nAll notable changes to this project will be documented in this file.\n\n"
body = "{% if version %}## {{ version }}{% else %}## Unreleased{% endif %}\n\n{% if commits | length > 0 %}{% for group, commits in commits | group_by(attribute=\"group\") %}### {{ group }}\n{% for commit in commits %}{% set msg = commit.message | trim %}{% set parts = msg | split(pat=\": \") %}- {% if parts | length > 1 %}{{ parts | slice(start=1) | join(sep=\": \") }}{% else %}{{ msg }}{% endif %}\n{% endfor %}\n{% endfor %}{% else %}- No changes\n{% endif %}"
trim = true

[git]
conventional_commits = true
filter_unconventional = true
split_commits = false
commit_preprocessors = [{ pattern = "\\(#([0-9]+)\\)$", replace = "" }]

# Map conventional commit types to changelog groups
commit_parsers = [
  { message = "^feat", group = "Features" },
  { message = "^fix", group = "Fixes" },
  { message = "^perf", group = "Performance" },
  { message = "^refactor", group = "Refactors" },
  { message = "^docs", group = "Docs" },
  { message = "^test", group = "Tests" },
  { message = "^ci", group = "CI" },
  { message = "^build", group = "Build" },
  { message = "^chore", group = "Chores" },
  { message = "^style", group = "Style" },
  { message = "^revert", group = "Reverts" },
]

# Match tags like v0.1.0, v1.2.3, and v1.2.3-beta.1
tag_pattern = "v[0-9]+\\.[0-9]+\\.[0-9]+.*"
